# ๐ฏ ูุธุงู ุงูุญุฌุฒ ุงููุญุฏูุซ / Booking System Setup

## ุงูุฎุทูุฉ 1: ุชุทุจูู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช / Step 1: Apply Database Migration

### โ๏ธ ููู ุฌุฏุงู / VERY IMPORTANT:

ูุฌุจ ุนููู ุชุทุจูู ููู SQL ุนูู ูุงุนุฏุฉ ุจูุงูุงุช Supabase ุงูุฎุงุตุฉ ุจู.

You MUST apply the SQL migration file to your Supabase database.

### ุงูุทุฑููุฉ / Method:

1. **ุงูุชุญ Supabase Dashboard**
   - ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
   - ุงุฎุชุฑ ูุดุฑูุนู / Select your project

2. **ุงูุชุญ SQL Editor**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงููุฑ ุนูู "SQL Editor"
   - In the sidebar, click "SQL Editor"

3. **ุงูุณุฎ ูุงูุตู SQL**
   - ุงูุชุญ ุงูููู: `web/supabase/migrations/20250117_update_bookings.sql`
   - Open the file: `web/supabase/migrations/20250117_update_bookings.sql`
   - ุงูุณุฎ **ูู ุงููุญุชูู** (ูู ุงูุณุทุฑ 1 ุฅูู 136)
   - Copy **ALL content** (from line 1 to 136)
   - ุงูุตูู ูู SQL Editor
   - Paste it in the SQL Editor

4. **ูููุฐ / Run**
   - ุงููุฑ ุนูู ุฒุฑ "Run" ุฃู ุงุถุบุท Ctrl+Enter
   - Click "Run" button or press Ctrl+Enter
   - ุงูุชุธุฑ ุญุชู ูุธูุฑ "Success โ"
   - Wait for "Success โ" message

### ูุง ุงูุฐู ุณูุญุฏุซุ / What will happen?

โ ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ ูุฌุฏูู `bookings`:
- `duration` - ูุฏุฉ ุงูููุนุฏ (ุงูุชุฑุงุถู 30 ุฏูููุฉ)
- `appointment_type` - ููุน ุงูููุนุฏ
- `specialization` - ุงูุชุฎุตุต
- `is_online` - ุฃูููุงูู ุฃู ุญุถูุฑู
- `meeting_link` - ุฑุงุจุท ุงูุงุฌุชูุงุน
- `location` - ุงููููุน
- `consultant_name` - ุงุณู ุงููุณุชุดุงุฑ
- `price` - ุงูุณุนุฑ
- `payment_status` - ุญุงูุฉ ุงูุฏูุน
- `notes_admin` - ููุงุญุธุงุช ุงูุฃุฏูู

โ ุฅูุดุงุก ุฌุฏูู `consultation_types` (ุฃููุงุน ุงูุงุณุชุดุงุฑุงุช)
โ ุฅูุดุงุก ุฌุฏูู `consultants` (ุงููุณุชุดุงุฑูู)
โ ุฅูุดุงุก ุฌุฏูู `site_settings` (ุฅุนุฏุงุฏุงุช ุงููููุน)
โ ุฅุถุงูุฉ ุจูุงูุงุช ุงูุชุฑุงุถูุฉ (4 ุฃููุงุน ุงุณุชุดุงุฑุงุช)
โ ุฅุนุฏุงุฏ Row Level Security (RLS) policies

---

## ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ูุธุงู ุงูุญุฌุฒ / Step 2: Test Booking System

ุจุนุฏ ุชุทุจูู SQLุ ููููู ุงุฎุชุจุงุฑ ุงููุธุงู:

After applying SQL, you can test the system:

1. **ุงูุชุญ ุตูุญุฉ ุงูุญุฌุฒ / Open booking page:**
   ```
   http://localhost:3000/book
   ```

2. **ุงุฎุชุฑ ููุนุฏ ูููุช / Select date and time**

3. **ุงููุฃ ุงูุจูุงูุงุช / Fill in details:**
   - ุงูุงุณู / Name
   - ุงูุจุฑูุฏ / Email
   - ููุน ุงูุงุณุชุดุงุฑุฉ (ุณูุชู ุชุญููููุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช!)
   - ุงุฎุชุฑ: ุฃูููุงูู ุฃู ุญุถูุฑู

4. **ุฃููุฏ ุงูุญุฌุฒ / Confirm booking**

---

## ุงูุฎุทูุฉ 3: ุนุฑุถ ุงูุญุฌูุฒุงุช ูู ุงูุฃุฏูู / Step 3: View Bookings in Admin

1. **ุณุฌูู ุฏุฎูู ููุฃุฏูู / Login to admin:**
   ```
   http://localhost:3000/admin
   ```

2. **ุงุฐูุจ ุฅูู "Bookings" / Go to "Bookings"**

3. **ูุฌุจ ุฃู ุชุฑู / You should see:**
   - ุฌููุน ุงูุญุฌูุฒุงุช ุงูุฌุฏูุฏุฉ
   - ุงูุชุฒุงูู ุงูููุฑู (real-time)
   - ุงูุญููู ุงูุฌุฏูุฏุฉ (is_online, duration, etc.)

---

## ุงูุฎุทูุฉ 4: ุฅุฏุงุฑุฉ ุฃููุงุช ุงูุนูู / Step 4: Manage Available Time Slots

### ูู ุงูุฃุฏูู / From Admin Panel:

1. ุงุฐูุจ ุฅูู: **Settings** (ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ)
2. ูุณู "Booking Settings"
3. ุฃุถู/ุนุฏูู ุฃููุงุช ุงูุนูู ุงููุชุงุญุฉ
4. ุงุญูุธ

### ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ / Default Times:
```
09:00, 10:00, 11:00, 14:00, 15:00, 16:00
```

---

## ุงูุฎุทูุฉ 5: ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุงุณุชุดุงุฑุงุช / Step 5: Manage Consultation Types

### ูู Supabase Dashboard:

1. ุงุฐูุจ ุฅูู **Table Editor**
2. ุงุฎุชุฑ ุฌุฏูู `consultation_types`
3. ููููู:
   - ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ
   - ุชุนุฏูู ุงูุฃุณุนุงุฑ
   - ุชุนุฏูู ุงููุฏุฉ
   - ุชูุนูู/ุฅูุบุงุก ุชูุนูู

### ุงูุฃููุงุน ุงูููุฌูุฏุฉ ุงูุชุฑุงุถูุงู:

| ุงูููุน | ุงููุฏุฉ | ุงูุณุนุฑ |
|------|------|------|
| Consultation Stratรฉgique | 60 min | 150โฌ |
| Consultation Financiรจre | 45 min | 120โฌ |
| Consultation RH | 45 min | 100โฌ |
| Consultation Juridique | 60 min | 180โฌ |

---

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ / New Features

### โ ููุนููุงุก / For Customers:
- ุญุฌุฒ ููุงุนูุฏ ุจุชูููู ุญูููู
- ุงุฎุชูุงุฑ ููุน ุงูุงุณุชุดุงุฑุฉ ูู ุงููุงุนุฏุฉ
- ุงุฎุชูุงุฑ ุฃูููุงูู ุฃู ุญุถูุฑู
- ุฅุดุนุงุฑุงุช ุจุงูุจุฑูุฏ (ุฅุฐุง ุชู ุฅุนุฏุงุฏ SMTP)
- ุตูุญุฉ "My Bookings" ูู Profile

### โ ููุฃุฏูู / For Admin:
- ุนุฑุถ ุฌููุน ุงูุญุฌูุฒุงุช ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ
- ุงูุชุฒุงูู ุงูููุฑู (real-time sync)
- ุชุฃููุฏ/ุฅูุบุงุก ุงูุญุฌูุฒุงุช
- ุฅุถุงูุฉ ููุงุญุธุงุช ุฎุงุตุฉ
- ุฅุฏุงุฑุฉ ุฃููุงุช ุงูุนูู
- ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุงุณุชุดุงุฑุงุช

### โ ุชููู / Technical:
- ุชูุงูู ูุงูู ูุน Supabase
- Row Level Security (RLS)
- Multi-language support (FR, AR, EN)
- Real-time synchronization
- Email notifications ready
- Google Calendar integration ready

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก / Troubleshooting

### โ Problem: "Something went wrong" ุนูุฏ ุงูุญุฌุฒ

**ุงูุญู / Solution:**
1. ุชุฃูุฏ ูู ุชุทุจูู SQL migration
2. ุชุญูู ูู console ูู ุงููุชุตูุญ (F12)
3. ุงูุธุฑ ุฅูู server logs ูู terminal

### โ Problem: ูุง ุชุธูุฑ ุฃููุงุน ุงูุงุณุชุดุงุฑุงุช

**ุงูุญู / Solution:**
1. ุชุฃูุฏ ูู ุชุทุจูู SQL (ูุถูู 4 ุฃููุงุน ุงูุชุฑุงุถูุฉ)
2. ุชุญูู ูู ุฌุฏูู `consultation_types` ูู Supabase
3. ุชุฃูุฏ ุฃู `is_active = true`

### โ Problem: ุงูุญุฌูุฒุงุช ูุง ุชุธูุฑ ูู ุงูุฃุฏูู

**ุงูุญู / Solution:**
1. ุชุญูู ูู RLS policies ูู Supabase
2. ุชุฃูุฏ ุฃู ุงููุณุชุฎุฏู ููุฌูุฏ ูู `admin_users`
3. ุงูุชุญ console ูุงุจุญุซ ุนู ุฃุฎุทุงุก

### โ Problem: Real-time ูุง ูุนูู

**ุงูุญู / Solution:**
1. ุงุฐูุจ ุฅูู Supabase Dashboard
2. **Database > Replication**
3. ูุนูู Replication ูุฌุฏูู `bookings`
4. ูุนูู Replication ูุฌุฏูู `consultation_types`

---

## ๐ง ุฅุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู / Email Setup (ุงุฎุชูุงุฑู)

ููุญุตูู ุนูู ุฅุดุนุงุฑุงุช ุจุฑูุฏ ุนูุฏ ุงูุญุฌุฒ:

1. ุฃุถู ูู `.env.local`:
```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
ADMIN_EMAIL=admin@sygmaconsult.com
```

2. ุจุนุฏ ุงูุญุฌุฒุ ุณูุชู ุฅุฑุณุงู:
   - ุจุฑูุฏ ุชุฃููุฏ ููุนููู
   - ุฅุดุนุงุฑ ููุฃุฏูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ / Next Steps

1. โ ุชุทุจูู SQL migration
2. โ ุงุฎุชุจุงุฑ ุงูุญุฌุฒ ูู `/book`
3. โ ุงูุชุญูู ูู ุงูุฃุฏูู `/admin/bookings`
4. ๐ ุฅุถุงูุฉ ุฃููุงุน ุงุณุชุดุงุฑุงุช ูุฎุตุตุฉ
5. โ๏ธ ุชุฎุตูุต ุฃููุงุช ุงูุนูู
6. ๐ง ุฅุนุฏุงุฏ SMTP (ุงุฎุชูุงุฑู)
7. ๐จ ุชุฎุตูุต ุงูุฃููุงู ูุงูุชุตููู

---

## ๐ ุงููุณุงุนุฏุฉ / Need Help?

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุงูุชุญ Developer Console (F12) ูุงูุธุฑ ุฅูู ุงูุฃุฎุทุงุก
2. ุชุญูู ูู server logs ูู terminal
3. ุชุฃูุฏ ูู ุชุทุจูู SQL migration ุจุดูู ุตุญูุญ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 17 ููุงูุฑ 2025
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ

