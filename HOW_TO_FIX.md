# ๐จ ููููุฉ ุฅุตูุงุญ ุงููุดููุฉ - How to Fix the Issue

## ุงููุดููุฉ | The Problem:
- โ ุงููููุน ูุนูู ูู localhost
- โ ุงููููุน ูุง ูุนูู ูู Vercel (Production)
- ุงูุฎุทุฃ: "Failed to create checkout session"

## ุงูุณุจุจ | Root Cause:
**ูุชุบูุฑุงุช ุงูุจูุฆุฉ (Environment Variables) ุบูุฑ ููุฌูุฏุฉ ูู Vercel**

---

## ๐ง ุงูุญู ุงูุณุฑูุน | Quick Solution

### ุงูุฎุทูุฉ 1: ุชุญูู ูู ุงููุดููุฉ
ุจุนุฏ ุฃู ููุดุฑ Vercel ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉุ ุงูุชุญ ูุฐุง ุงูุฑุงุจุท:
```
https://sygmaconsult.com/api/check-env
```

ุณูุนุฑุถ ูู ุญุงูุฉ ุฌููุน ุงููุชุบูุฑุงุช:
- โ = ููุฌูุฏ
- โ = ููููุฏ

---

### ุงูุฎุทูุฉ 2: ุฃุถู ุงููุชุบูุฑุงุช ูู Vercel

#### ุฃ. ุงูุชุญ Vercel Dashboard
1. ุงุฐูุจ ุฅูู: https://vercel.com/dashboard
2. ุงุฎุชุฑ ูุดุฑูุน `sygmaconsult`
3. ุงุฐูุจ ุฅูู `Settings` โ `Environment Variables`

#### ุจ. ุฃุถู ูุฐู ุงููุชุบูุฑุงุช (REQUIRED):

##### 1. Supabase (ููุฌูุฏุฉ ุจุงููุนู ูู .env.local):
```
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY
```

##### 2. Stripe (ูู ููู .env.local):
```
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET
```

##### 3. Email/SMTP (ูู ููู .env.local):
```
SMTP_HOST
SMTP_PORT
SMTP_USER
SMTP_PASSWORD
ADMIN_EMAIL
```

#### ุฌ. ููููุฉ ุงูุฅุถุงูุฉ:
1. ุงูุชุญ ููู `web/.env.local` ุนูู ุฌูุงุฒู
2. ููู ูุชุบูุฑ:
   - **Key**: ุงูุณุฎ ุงุณู ุงููุชุบูุฑ (ูุซู: `STRIPE_SECRET_KEY`)
   - **Value**: ุงูุณุฎ ุงููููุฉ ูู `.env.local`
   - **Environment**: ุงุฎุชุฑ **ALL** (Production, Preview, Development)
3. ุงุถุบุท **Add** ุจุนุฏ ูู ูุชุบูุฑ

---

### ุงูุฎุทูุฉ 3: ุฃุนุฏ ุงููุดุฑ (Redeploy)

ุจุนุฏ ุฅุถุงูุฉ ุฌููุน ุงููุชุบูุฑุงุช:

1. ุงุฐูุจ ุฅูู `Deployments` ูู Vercel
2. ุนูู ุขุฎุฑ deploymentุ ุงุถุบุท ุงูููุงุท ุงูุซูุงุซ `...`
3. ุงุฎุชุฑ `Redeploy`
4. ุงูุชุธุฑ 2-3 ุฏูุงุฆู

---

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุฑ ุงููููุน

1. ุงูุชุญ: https://sygmaconsult.com/api/check-env
   - ุชุฃูุฏ ุฃู ูู ุดูุก โ

2. ุฌุฑุจ ุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฏููุนุฉ
   - ูุฌุจ ุฃู ูุนูู ุงูุฏูุน ุงูุขู!

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู | Checklist

- [ ] ูุชุญุช Vercel Dashboard
- [ ] ุฃุถูุช ูุชุบูุฑุงุช Supabase
- [ ] ุฃุถูุช ูุชุบูุฑุงุช Stripe (ุงูุฃูู!)
- [ ] ุฃุถูุช ูุชุบูุฑุงุช Email
- [ ] ุงุฎุชุฑุช "ALL" ููุจูุฆุงุช
- [ ] ุนููุช Redeploy
- [ ] ูุญุตุช `/api/check-env`
- [ ] ุงุฎุชุจุฑุช ุงูุฏูุน

---

## ๐ ุฅุฐุง ูู ูุนูู | If It Still Doesn't Work

### ุชุฃูุฏ ูู:
1. โ ูุณุฎุช ุงูููู ุจุดูู ุตุญูุญ (ุจุฏูู ูุณุงูุงุช ุฒุงุฆุฏุฉ)
2. โ ุงุฎุชุฑุช "ALL" ููุจูุฆุงุช
3. โ ุนููุช Redeploy ุจุนุฏ ุฅุถุงูุฉ ุงููุชุบูุฑุงุช
4. โ ุงูุชุธุฑุช ุญุชู ุงูุชูู ุงูู deployment

### ุงูุญุต Logs:
1. ุงุฐูุจ ุฅูู Vercel โ Deployments
2. ุงูุชุญ ุขุฎุฑ deployment
3. ุดุงูุฏ `Function Logs` ููุฃุฎุทุงุก

---

## ๐ฑ ูุณุฎุฉ ุณุฑูุนุฉ | TL;DR

```bash
1. ุงูุชุญ: vercel.com/dashboard
2. Settings โ Environment Variables
3. ุงูุชุญ web/.env.local ุนูู ุฌูุงุฒู
4. ุงูุณุฎ ูู ูุชุบูุฑ ูู .env.local ุฅูู Vercel
5. ุงุฎุชุฑ "ALL" ููุจูุฆุงุช
6. Redeploy
7. ุงุฎุชุจุฑ: https://sygmaconsult.com/api/check-env
```

---

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ | Expected Result

ุจุนุฏ ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ูุฅุนุงุฏุฉ ุงููุดุฑ:
- โ `/api/check-env` ูุนุฑุถ ูู ุดูุก ุฃุฎุถุฑ โ
- โ ุงูุญุฌูุฒุงุช ุงููุฌุงููุฉ ุชุนูู
- โ ุงูุญุฌูุฒุงุช ุงููุฏููุนุฉ ุชุนูู
- โ ุงูุฅููููุงุช ุชุฑุณู
- โ ูู ุดูุก ูุซู localhost

---

**ุขุฎุฑ ุชุญุฏูุซ**: 20 ุฏูุณูุจุฑ 2025
