# ๐ด ุงููุดููุฉ: ุงููุณุชุฎุฏููู ูุง ูุธูุฑูู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

## โ ุชู ุชุญุฏูุฏ ุงูุณุจุจ ุงูุฌุฐุฑู

ุชู ุงูุชุดุงู **ุณุจุจูู ุฑุฆูุณููู**:

### 1๏ธโฃ ุฎุทุฃ ูู ุงูููุฏ (ุชู ุฅุตูุงุญู โ)
- ุงูููู: `web/context/AuthContext.tsx`
- ุงููุดููุฉ: ูุงู ูุณุชุฎุฏู `avatar_url` ุจุฏูุงู ูู `photo_url`
- **ุงูุญู**: ุชู ุชุตุญูุญ ุงุณู ุงูุญูู ูู ุงูููุฏ

### 2๏ธโฃ ุณูุงุณุงุช RLS ูุญุฌูุจุฉ ูู Supabase โ๏ธ **ูุญุชุงุฌ ุฅูู ุฅุตูุงุญ**
- ุงููุดููุฉ: ุณูุงุณุฉ INSERT ูุญุฌูุจุฉ ูู ุฌุฏูู `user_profiles`
- ุงููุชูุฌุฉ: `AuthContext.tsx` ูุง ูุณุชุทูุน ุฅูุดุงุก ูููุงุช ุชุนุฑูู ุฌุฏูุฏุฉ
- **ุงูุญู**: ุชุดุบูู SQL script ูุฅุตูุงุญ ุงูุณูุงุณุงุช

---

## ๐ ุฎุทูุงุช ุงูุญู (5 ุฏูุงุฆู)

### ุงูุฎุทูุฉ 1๏ธโฃ: ุงูุชุญ Supabase SQL Editor

ุงุฐูุจ ุฅูู:
```
https://ldbsacdpkinbpcguvgai.supabase.co/project/ldbsacdpkinbpcguvgai/sql/new
```

### ุงูุฎุทูุฉ 2๏ธโฃ: ููุฐ SQL Script

1. ุงูุชุญ ุงูููู: `FIX_RLS_POLICIES.sql` (ูู ุงููุฌูุฏ ุงูุฑุฆูุณู)

2. **ุงูุณุฎ ูู ูุญุชููุงุช ุงูููู**

3. ุงูุตููุง ูู Supabase SQL Editor

4. ุงุถุบุท **"Run"** ุฃู **"ุชุดุบูู"**

### ุงูุฎุทูุฉ 3๏ธโฃ: ุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชุดุบูู ุงูู SQL:

```bash
cd "c:\Users\utilisateur\Desktop\sygma consult\web"
node scripts/check-rls-policies.mjs
```

ูุฌุจ ุฃู ุชุฑู:
```
โ INSERT is allowed!
```

---

## ๐ ูุงุฐุง ููุนู ุงูู SQL Scriptุ

ุงูุณูุฑูุจุช ูุถุจุท 4 ุณูุงุณุงุช:

### โ ุณูุงุณุฉ ุงููุฑุงุกุฉ (SELECT)
- ูุณูุญ ูุฃู ุดุฎุต ุจูุฑุงุกุฉ ูููุงุช ุชุนุฑูู ุงููุณุชุฎุฏููู
- **ููู** ูููุญุฉ ุงูุฅุฏุงุฑุฉ ูุนุฑุถ ุงููุณุชุฎุฏููู

### โ ุณูุงุณุฉ ุงูุฅุฏุฑุงุฌ (INSERT)
- ูุณูุญ ูููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ุจุฅูุดุงุก ูููุงุชูู
- **ูุตูุญ** ูุดููุฉ ุนุฏู ุธููุฑ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ

### โ ุณูุงุณุฉ ุงูุชุญุฏูุซ (UPDATE)
- ูุณูุญ ูููุณุชุฎุฏููู ุจุชุญุฏูุซ ูููุงุชูู ุงูุดุฎุตูุฉ ููุท

### โ ุณูุงุณุฉ ุงูุญุฐู (DELETE)
- ูุณูุญ ูููุณุชุฎุฏููู ุจุญุฐู ุญุณุงุจุงุชูู ููุท

---

## ๐ฏ ุจุนุฏ ุชูููุฐ ุงูุญู

### ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:
โ ุณูุนูููู **ุชููุงุฆูุงู** ุนูุฏ ุงูุชุณุฌูู
- AuthContext.tsx ุณูููู ุจุฅูุดุงุก ูููุงุชูู ูู Supabase
- ุณูุธูุฑูู ูุจุงุดุฑุฉ ูู `/admin/users`

### ูููุณุชุฎุฏููู ุงูุญุงูููู (ูู Firebase ููุท):
ูุฏูู **3 ุฎูุงุฑุงุช**:

#### ุงูุฎูุงุฑ 1๏ธโฃ: ุทูุจ ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู (ุงูุฃุณูู)
- ุงุทูุจ ูู ุงููุณุชุฎุฏููู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
- AuthContext.tsx ุณูุฒุงูููู ุชููุงุฆูุงู

#### ุงูุฎูุงุฑ 2๏ธโฃ: ุงููุฒุงููุฉ ุงููุฏููุฉ (ุงูุฃูุถู)
1. ูุฒูู `serviceAccountKey.json` ูู Firebase Console:
   ```
   https://console.firebase.google.com/project/sygmaconsult/settings/serviceaccounts/adminsdk
   ```

2. ุถุน ุงูููู ูู: `web/serviceAccountKey.json`

3. ุดุบูู ุงูุณูุฑูุจุช:
   ```bash
   cd "c:\Users\utilisateur\Desktop\sygma consult\web"
   node scripts/manual-sync-users.mjs
   ```

#### ุงูุฎูุงุฑ 3๏ธโฃ: ุงูุงูุชุธุงุฑ (ุบูุฑ ููุตู ุจู)
- ุงููุณุชุฎุฏููู ุณูุชู ูุฒุงููุชูู ุนูุฏูุง ูุณุฌููู ุงูุฏุฎูู ูุงุญูุงู
- ููู ูู ุชุณุชุทูุน ุฑุคูุชูู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ุญุชู ุฐูู ุงูููุช

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชุทุจูู ุงูุญูุ ุชุญูู:

### 1. ุชุดุบูู ุณูุฑูุจุช ุงููุญุต:
```bash
cd "c:\Users\utilisateur\Desktop\sygma consult\web"
node scripts/check-users.mjs
```

ูุฌุจ ุฃู ุชุฑู:
```
โ Found X users in user_profiles table
```

### 2. ุชุญูู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:
ุงุฐูุจ ุฅูู: `http://localhost:3000/admin/users`

ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุงููุณุชุฎุฏููู.

### 3. ุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ:
1. ุงุฐูุจ ุฅูู `/sign-up`
2. ุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
3. ุชุญูู ูู `/admin/users` - ูุฌุจ ุฃู ูุธูุฑ ููุฑุงู!

---

## ๐ ุญู ุงููุดุงูู

### ุงููุดููุฉ: ูุง ูุฒุงู INSERT ูุญุฌูุจ
**ุงูุณุจุจ**: ูู ูุชู ุชูููุฐ SQL ุจุดูู ุตุญูุญ

**ุงูุญู**:
1. ุชุญูู ูู ุฃูู ูุณุฎุช **ูู** ูุญุชููุงุช `FIX_RLS_POLICIES.sql`
2. ุชุฃูุฏ ุฃูู ุถุบุทุช "Run" ูู Supabase SQL Editor
3. ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงูู console

### ุงููุดููุฉ: ุงููุณุชุฎุฏููู ุงูุญุงูููู ูุง ูุฒุงููู ููููุฏูู
**ุงูุณุจุจ**: ุงููุณุชุฎุฏููู ูู Firebase ููุทุ ููุณูุง ูู Supabase

**ุงูุญู**:
ุงุณุชุฎุฏู **ุงูุฎูุงุฑ 2** ูู ุงูุฃุนูู (ุงููุฒุงููุฉ ุงููุฏููุฉ)

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุชุณุฌูู
**ุงูุณุจุจ**: ูุฏ ุชููู ููุงู ูุดููุฉ ูู Firebase Configuration

**ุงูุญู**:
ุชุญูู ูู:
1. `web/.env.local` ูุญุชูู ุนูู Firebase credentials ุตุญูุญุฉ
2. Firebase Authentication ููุนูู ูู Firebase Console

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู ุจุนุฏ ุชุทุจูู ุงูุญู:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: contact@sygma-consult.com
- GitHub Issues: https://github.com/jboukthir-lang/sygmaconsult/issues

---

## ๐ ููุฎุต ุณุฑูุน

1. โ **ุงูููุฏ ุชู ุฅุตูุงุญู** - `AuthContext.tsx` ูุณุชุฎุฏู ุงูุขู `photo_url` ุงูุตุญูุญ
2. โ๏ธ **ูุฌุจ ุชุดุบูู SQL** - ูุฅุตูุงุญ ุณูุงุณุงุช RLS ูู Supabase
3. ๐ **ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ** - ุณูุนูููู ุชููุงุฆูุงู ุจุนุฏ ุชุดุบูู SQL
4. ๐ค **ุงููุณุชุฎุฏููู ุงูุญุงูููู** - ุชุญุชุงุฌ ูููุฒุงููุฉ ุงููุฏููุฉ ุฃู ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2024-12-18
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุชูููุฐ โ
